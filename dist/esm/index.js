import*as e from"react";var n=e.createContext({loader:null,root:void 0,rootMargin:"0px",threshold:1}),t=function(t){var r=t.children,a=t.loader,o=void 0===a?null:a,i=t.root,l=t.rootMargin,d=t.threshold;return e.createElement(n.Provider,{value:{loader:o,root:i,rootMargin:l,threshold:d}},r)},r=[],a=[];!function(e,n){if(e&&"undefined"!=typeof document){var t,o=!0===n.prepend?"prepend":"append",i=!0===n.singleTag,l="string"==typeof n.container?document.querySelector(n.container):document.getElementsByTagName("head")[0];if(i){var d=r.indexOf(l);-1===d&&(d=r.push(l)-1,a[d]={}),t=a[d]&&a[d][o]?a[d][o]:a[d][o]=s()}else t=s();65279===e.charCodeAt(0)&&(e=e.substring(1)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(document.createTextNode(e))}function s(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),n.attributes)for(var t=Object.keys(n.attributes),r=0;r<t.length;r++)e.setAttribute(t[r],n.attributes[t[r]]);var a="prepend"===o?"afterbegin":"beforeend";return l.insertAdjacentElement(a,e),e}}("@keyframes lazy-bastard-skeleton-loading {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0 50%;\n  }\n}\n\n.lazy-bastard-skeleton-loading {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.lazy-bastard-skeleton-loading li {\n  margin: 0;\n  padding: 0;\n  animation: lazy-bastard-skeleton-loading 1.4s infinite;\n  background-image: linear-gradient(\n    90deg,\n    rgba(190, 190, 190, 0.2) 25%,\n    rgba(255, 255, 255, 0.16) 37%,\n    rgba(190, 190, 190, 0.2) 63%\n  );\n  background-size: 400% 100%;\n  border-radius: 4px;\n  height: 16px;\n  width: 100%;\n}\n\n.lazy-bastard-skeleton-loading li:not(:last-child) {\n  margin-bottom: 10px;\n}\n\n.lazy-bastard-skeleton-loading\n  li:last-child:not(:first-child):not(:nth-child(2)) {\n  width: 61%;\n}\n",{});var o=function(t){var r=t.children,a=t.height,o=void 0===a?15:a,i=e.useState(!1),l=i[0],d=i[1],s=e.useContext(n),c=s.loader,u=s.root,g=s.rootMargin,f=s.threshold,h=e.useRef(null);e.useEffect((function(){var e,n=function(){e&&h.current&&e.unobserve(h.current)};if(h.current)return(e=new IntersectionObserver((function(e){e[0].intersectionRatio<=0||(d(!0),n())}),{root:u,rootMargin:g,threshold:f})).observe(h.current),function(){n()}}),[h,g,f]);var b=Math.floor(o/26)||1;return l?e.createElement(e.Fragment,null,e.createElement("div",{ref:h}),e.createElement(e.Suspense,{fallback:c||e.createElement("ul",{className:"lazy-bastard-skeleton-loading"},Array(b).fill(null).map((function(n,t){return e.createElement("li",{key:t})})))},r)):e.createElement("div",{ref:h})};export{o as LazyBastard,t as LazyBastardProvider,n as LazyContext};
