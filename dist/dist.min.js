!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["lazy-bastard"]={},e.React)}(this,function(e,t){"use strict";function r(r){if(r&&r.__esModule)return r;var n=Object.create(null);return r&&Object.keys(r).forEach(function(e){var t;"default"!==e&&(t=Object.getOwnPropertyDescriptor(r,e),Object.defineProperty(n,e,t.get?t:{enumerable:!0,get:function(){return r[e]}}))}),n.default=r,Object.freeze(n)}var i=r(t);const s=i.createContext({loader:null,rootMargin:"0px",threshold:1});e.LazyBastard=({children:e,height:t=15})=>{const[r,n]=i.useState(!1),{loader:a,rootMargin:l,threshold:o}=i.useContext(s),c=i.useRef(null);i.useEffect(()=>{let e;const t=()=>{e&&c.current&&e.unobserve(c.current)};if(c.current)return(e=new IntersectionObserver(e=>{e[0].intersectionRatio<=0||(n(!0),t())},{rootMargin:l,threshold:o})).observe(c.current),()=>{t()}},[c,l,o]);var u=Math.floor(t/26)||1;return r?i.createElement(i.Fragment,null,i.createElement("div",{ref:c}),i.createElement(i.Suspense,{fallback:a||i.createElement("ul",{className:"lazy-bastard"},Array(u).fill(null).map((e,t)=>i.createElement("li",{key:t})))},e)):i.createElement("div",{ref:c,style:{height:t}})},e.LazyBastardProvider=({children:e,loader:t=null})=>i.createElement(s.Provider,{value:{loader:t}},e),Object.defineProperty(e,"__esModule",{value:!0})});
